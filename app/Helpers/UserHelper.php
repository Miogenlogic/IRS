<?phpnamespace App\Helpers;use App\Models\AppointmentType;use App\Models\Booking;use App\Models\Country;use App\Models\DateTime;use App\Models\DoctorDetails;use App\Models\Service;use App\Models\ServiceModal;use App\Models\User;use App\Models\UserDetails;use App\Models\Settings;use Carbon\Carbon;use DB;use Hash;use Auth;use Mail;use DataTables;use Session;use Redirect;use Alert;use Input;use Illuminate\Support\Facades\Crypt;use App\Providers\HelperServiceProvider;class UserHelper extends HelperServiceProvider{    static function getHeaderFooter()    {        $settings=Settings::select('value','option')->pluck('value','option');        return $settings;    }    public static function service(){        $service=Service::select('*')->get();        return $service;    }    static function doctorservice()    {        $doctor=UserDetails::select('user_details.*')                ->leftjoin('users','users.id','=','user_details.user_id')                ->where('user_type','=','doctor')                ->get();      //dd($service);       //$doctor=DoctorDetails::where('service_id','=',$service->id)->get()->first();        //dd($doctor);        return $doctor;    }    static function userById($user_id)    {        $user=UserDetails::select('user_details.*')            ->leftjoin('users','users.id','=','user_details.user_id')            ->where('users.id','=',$user_id)            ->get()->first();        return $user;    }    static function appointmentType($id)    {        $appotype = AppointmentType::select('appointment_type.*')            ->leftjoin('booking','booking.service_type','=','appointment_type.id')            ->where('booking.service_type','=',$id)            ->get()->first();        //$appotype=AppointmentType::get()->first();        return $appotype;    }    static function datetime()    {        $datetime=DateTime::get();        return $datetime;    }    static function patientinfo()    {        $user_session=Session::get('user');        //dd($user_session);die;        $profile=User::find($user_session['user_id']);        $patient=UserDetails::where('user_id','=',$profile->id)->get()->first();        //dd($patient);die;        //$patient=UserDetails::where()->get()->first();        return $patient;    }    static function askquestion()    {        $user_session = Session::get('user');        //dd($user_session);die;        //$profile = User::find($user_session['user_id']);    }    static function doctor()    {        $user_session=Session::get('user');        $profile=User::find($user_session['user_id']);        $doctor=DoctorDetails::where('user_id','=',$profile->id)->get()->first();        return $doctor;    }    static function country()    {        $country=Country::get();        return $country;    }    static function servicetype($id)    {        $servicetype = Service::find($id);        return $servicetype;    }   static function serviceById($id){        $service=Service::find($id);        return $service;    }    static function urlEncode($str)    {        $encrypted = Crypt::encryptString($str);        return $encrypted;    }    static function urlDecode($str)    {        $decrypted = Crypt::decryptString($str);        return $decrypted;    }    static function totalAppoinment(){        $appo = Booking::select('booking.id')            //->where('status','=','Confirmed')            ->get()            ->count();        return $appo;    }    static function pendingAppoinment(){        $pend = Booking::select('booking.id')            ->where('status','!=','Confirmed')            ->get()            ->count();        return $pend;    }    static function totalPhysicalAppoinment(){        $phy = Booking::select('booking.id')            ->leftjoin('appointment_type','appointment_type.id','=','booking.service_type')            ->where('appointment_type.type','=','Physical Consultation')            //->where('status','=','Confirmed')            ->get()            ->count();        return $phy;    }    static function pendingPhysicalAppoinment(){        $phyappo = Booking::select('booking.id')            ->leftjoin('appointment_type','appointment_type.id','=','booking.service_type')            ->where('appointment_type.type','=','Physical Consultation')            ->where('status','!=','Confirmed')            ->get()            ->count();        return $phyappo;    }    static function totalVirtualAppoinment(){        $vir = Booking::select('booking.id')            ->leftjoin('appointment_type','appointment_type.id','=','booking.service_type')            ->where('appointment_type.type','=','Virtual Consultation')            //->where('status','=','Confirmed')            ->get()            ->count();        return $vir;    }    static function pendingVirtualAppoinment(){        $virappo = Booking::select('booking.id')            ->leftjoin('appointment_type','appointment_type.id','=','booking.service_type')            ->where('appointment_type.type','=','Virtual Consultation')            ->where('status','!=','Confirmed')            ->get()            ->count();        return $virappo;    }    static function user(){        $user = User::select('users.id')            //->where('status','=','Confirmed')            ->get()            ->count();        return $user;    }    static function modal(){        $modal = ServiceModal::get();        //select('service_model.*')            //->leftjoin('service','service.id','=','service_model.service_id')            //->where('service.service','=',$id)       // ->get();        return $modal;    }}